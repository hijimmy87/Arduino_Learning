#include <math.h>

const int PIN[] = {2, 3, 4};
const double BEAT = 1000;

int pitchs[3][95] = {
    {62, 71, 69, 67, 62, 62, 71, 69, 67, 64, 64, 72, 71, 69, 66, 74, 74, 72, 69, 71, 62, 71, 69, 67, 62, 62, 71, 69, 67, 64, 64, 72, 71, 69, 74, 74, 74, 74, 76, 74, 72, 69, 67, 74, 71, 71, 71, 71, 71, 71, 71, 74, 67, 69, 71, 0, 72, 72, 72, 72, 72, 71, 71, 71, 71, 69, 69, 71, 69, 74, 71, 71, 71, 71, 71, 71, 71, 74, 67, 69, 71, 0, 72, 72, 72, 72, 72, 71, 71, 71, 74, 74, 72, 69, 67},
    {55, 0, 0, 0, 55, 55, 0, 0, 0, 55, 55, 0, 0, 0, 57, 57, 0, 0, 0, 59, 55, 0, 0, 0, 55, 55, 0, 0, 0, 55, 55, 0, 0, 0, 57, 0, 0, 0, 57, 0, 0, 0, 59, 0, 55, 0, 50, 55, 0, 50, 55, 0, 50, 0, 55, 50, 55, 0, 52, 0, 55, 0, 50, 0, 52, 0, 50, 0, 54, 50, 55, 0, 50, 55, 0, 50, 55, 0, 50, 0, 55, 50, 55, 0, 52, 0, 55, 0, 50, 0, 52, 0, 50, 0, 55},
    {59, 0, 0, 0, 59, 59, 0, 0, 0, 60, 60, 0, 0, 0, 62, 62, 0, 0, 0, 62, 59, 0, 0, 0, 59, 59, 0, 0, 0, 60, 60, 0, 0, 0, 62, 0, 0, 0, 62, 0, 0, 0, 62, 0, 59, 0, 0, 59, 0, 0, 59, 0, 0, 0, 59, 0, 48, 0, 0, 0, 59, 0, 0, 0, 57, 0, 0, 0, 57, 0, 59, 0, 0, 59, 0, 0, 59, 0, 0, 0, 59, 0, 48, 0, 0, 0, 59, 0, 0, 0, 57, 0, 0, 0, 59}};
double durations[] = {0.125, 0.125, 0.125, 0.125, 0.5, 0.125, 0.125, 0.125, 0.125, 0.5, 0.125, 0.125, 0.125, 0.125, 0.5, 0.125, 0.125, 0.125, 0.125, 0.5, 0.125, 0.125, 0.125, 0.125, 0.5, 0.125, 0.125, 0.125, 0.125, 0.5, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.25, 0.25, 0.125, 0.125, 0.25, 0.125, 0.125, 0.25, 0.125, 0.125, 0.125, 0.125, 0.25, 0.25, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.25, 0.25, 0.125, 0.125, 0.25, 0.125, 0.125, 0.25, 0.125, 0.125, 0.125, 0.125, 0.25, 0.25, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.125, 0.5};
int notes = sizeof(durations) / sizeof(double);

int pitch2freq(int p)
{
    if (p == 0)
        return 0;
    return round(440.0 * pow(2.0, (p - 69) / 12.0));
}

void setup()
{
    Serial.begin(230400);
    Serial.println(notes);
    for (int j = 0; j < 3; j++)
        pinMode(PIN[j], OUTPUT);
}

void loop()
{
    for (int i = 0; i < notes; i++)
    {
        int d = durations[i] * BEAT;
        for (int j = 0; j < 5; j++)
            tone(PIN[j], pitch2freq(pitchs[j][i]), d);
        delay(d * 1.375);
        for (int j = 0; j < 5; j++)
            noTone(PIN[j]);
    }
    delay(5000);
}